(this["webpackJsonpfrontend-challenge"]=this["webpackJsonpfrontend-challenge"]||[]).push([[0],{37:function(e,t,c){},38:function(e,t,c){},47:function(e,t,c){"use strict";c.r(t);var n=c(1),o=c.n(n),s=c(16),i=c.n(s),r=(c(37),c(38),c(10)),a=c(5),l=c(19),j=c(4),u="SET_LOGIN_STATE",d="SET_ROLE_STATE",b="CREATE_STORY",h="LOGOUT",O="GET_STORIES",m="GET_STORY",p=function(){return sessionStorage.getItem("token")||null},f=p(),x=function(e){var t=e.email,c=(e.password,e.isAdmin);return function(n){return fetch("http://localhost:3000/api/v1/signin",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){var o;n((o=Object(j.a)(Object(j.a)({},e),{},{userId:t,isAdmin:c}),{type:u,payload:o})),function(e,t){sessionStorage.setItem("token",e),sessionStorage.setItem("user",JSON.stringify(t))}(e.token,e.lastName)})).catch((function(e){alert("Login Failed","Some error occured, please retry"),console.log(e)}))}},g=function(){return function(e){return fetch("http://localhost:3000/api/v1/stories",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(f)}}).then((function(e){return e.json()})).then((function(t){var c;console.log(t),e((c=Object(l.a)(t),{type:O,payload:c}))})).catch((function(e){alert("Get stories failed","Some error occured, please retry"),console.log(e)}))}},y=function(e){return function(t){return fetch("http://localhost:3000/api/v1/stories/".concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(f)}}).then((function(e){return e.json()})).then((function(e){var c;console.log(e),t((c=Object(j.a)({},e),{type:m,payload:c}))})).catch((function(e){alert("View stories failed","Some error occured, please retry"),console.log(e)}))}},v=function(e){console.log(f);var t=e.summary,c=e.description,n=e.type,o=e.complexity,s=e.time,i=e.cost;return function(r){return fetch("http://localhost:3000/api/v1/stories",{method:"POST",headers:{credentials:"include",Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e),r({type:b,payload:{summary:t,description:c,type:n,complexity:o,time:s,cost:i}})})).catch((function(e){alert("Create story failed, please retry"),console.log(e)}))}},S=c(7),N=Object(S.b)(),T=c(3),C=c(0),A=Object(T.g)((function(){var e=Object(n.useState)(""),t=Object(r.a)(e,2),c=t[0],o=t[1],s=Object(n.useState)(""),i=Object(r.a)(s,2),l=i[0],j=i[1],u=Object(n.useState)(!1),d=Object(r.a)(u,2),b=d[0],h=d[1],O=Object(a.b)(),m=Object(a.c)((function(e){return e.loginReducer.isLoggedIn}));Object(n.useEffect)((function(){m&&setTimeout((function(){return N.push("/user")}),1e3)}),[m]);return Object(C.jsxs)("div",{children:[Object(C.jsxs)("form",{className:"login-form",children:[Object(C.jsx)("input",{type:"email",name:"email",placeholder:"Email",onChange:function(e){o(e.target.value)}}),Object(C.jsx)("input",{type:"password",name:"password",placeholder:"Password",onChange:function(e){j(e.target.value)}}),Object(C.jsx)("button",{type:"submit",disabled:""===c||""===l,onClick:function(e){e.preventDefault(),function(e,t,c){O(x({email:e,password:t,isAdmin:c}))}(c,l,b)},children:"Login"})]}),Object(C.jsxs)("button",{onClick:function(e){h(!0),b&&h(!1),console.log(b)},children:["Switch to ",b?"user":"admin"]})]})})),E=c(32);var k=function(e){var t=e.component,c=Object(E.a)(e,["component"]),n=Object(a.c)((function(e){return e.loginReducer.token}));return console.log(n),Object(C.jsx)(T.b,Object(j.a)(Object(j.a)({},c),{},{render:function(e){return n?Object(C.jsx)(t,Object(j.a)({},e)):Object(C.jsx)(T.a,{to:{pathname:"/Archimydes-frontend-challenge/",state:{from:e.location}}})}}))},w=Object(T.g)((function(){var e=Object(n.useState)(""),t=Object(r.a)(e,2),c=t[0],o=t[1],s=Object(n.useState)(""),i=Object(r.a)(s,2),l=i[0],j=i[1],u=Object(n.useState)(""),d=Object(r.a)(u,2),b=d[0],h=d[1],O=Object(n.useState)(""),m=Object(r.a)(O,2),p=m[0],f=m[1],x=Object(n.useState)(""),g=Object(r.a)(x,2),y=g[0],S=g[1],T=Object(n.useState)(0),A=Object(r.a)(T,2),E=A[0],k=A[1],w=Object(a.b)();return Object(C.jsx)("div",{children:Object(C.jsxs)("form",{className:"create-story-form",children:[Object(C.jsx)("label",{for:"summary",children:"Summary:"}),Object(C.jsx)("input",{name:"summary",type:"text",onChange:function(e){o(e.target.value)}}),Object(C.jsx)("label",{for:"desc",children:"Description:"}),Object(C.jsx)("textarea",{name:"desc",type:"text",onChange:function(e){j(e.target.value)}}),Object(C.jsx)("label",{for:"type",children:"Type:"}),Object(C.jsxs)("select",{name:"type",onChange:function(e){h(e.target.value)},children:[Object(C.jsx)("option",{value:"enhancement",defaultValue:!0,children:"Enchancement"}),Object(C.jsx)("option",{value:"bugfix",children:"Bugfix"}),Object(C.jsx)("option",{value:"development",children:"Development"}),Object(C.jsx)("option",{value:"qa",children:"QA"})]}),Object(C.jsx)("label",{for:"complexity",children:"Complexity:"}),Object(C.jsxs)("select",{name:"complexity",onChange:function(e){f(e.target.value)},children:[Object(C.jsx)("option",{value:"low",defaultValue:!0,children:"Low"}),Object(C.jsx)("option",{value:"mid",children:"Mid"}),Object(C.jsx)("option",{value:"high",children:"High"})]}),Object(C.jsx)("label",{for:"time",children:"Estimated time for completion:"}),Object(C.jsx)("input",{name:"time",type:"text",onChange:function(e){S(e.target.value)}}),Object(C.jsx)("label",{for:"cost",children:"Cost:"}),Object(C.jsx)("input",{name:"cost",type:"number",onChange:function(e){k(e.target.value)}}),Object(C.jsx)("button",{onClick:function(e){e.preventDefault(),function(e,t,c,n){w(v({summary:e,description:t,type:c,complexity:n,time:y,cost:E}))}(c,l,b,p),setTimeout((function(){return N.push("/userStories")}),1e3)},children:"Submit"})]})})})),R=Object(T.g)((function(){var e=Object(a.c)((function(e){return e.storyReducer.stories})),t=Object(a.b)();Object(n.useEffect)((function(){t(g())}),[]),console.log("test"),console.log(e);var c=Object(a.c)((function(e){return e.loginReducer.isAdmin})),o=function(e){console.log("test"),c&&(!function(e){t(y(e))}(e),setTimeout((function(){return N.push("/userStory")}),1e3))};return Object(C.jsx)("div",{children:Object(C.jsxs)("section",{children:[Object(C.jsxs)("header",{children:[Object(C.jsx)("div",{className:"col",children:Object(C.jsx)("strong",{children:"Summary"})}),Object(C.jsx)("div",{className:"col",children:Object(C.jsx)("strong",{children:"Description"})}),Object(C.jsx)("div",{className:"col",children:Object(C.jsx)("strong",{children:"Type"})}),Object(C.jsx)("div",{className:"col",children:Object(C.jsx)("strong",{children:"Complexity"})}),Object(C.jsx)("div",{className:"col",children:Object(C.jsx)("strong",{children:"Time"})}),Object(C.jsx)("div",{className:"col",children:Object(C.jsx)("strong",{children:"Cost"})})]}),e.map((function(e){return Object(C.jsxs)("div",{className:"row bg-black text-white ".concat((t=e.status,"accepted"===t?"bg-green":"rejected"===t?"bg-red":void 0)),onClick:function(){return o(e.id)},children:[Object(C.jsx)("div",{className:"col",children:e.summary}),Object(C.jsx)("div",{className:"col",children:e.description}),Object(C.jsx)("div",{className:"col",children:e.type}),Object(C.jsx)("div",{className:"col",children:e.complexity}),Object(C.jsx)("div",{className:"col",children:e.estimatedHrs}),Object(C.jsx)("div",{className:"col",children:e.cost})]},e.id);var t}))]})})})),I=c(12),L=Object(T.g)((function(){var e=Object(a.c)((function(e){return e.storyReducer.story})),t=Object(a.b)(),c=function(e,c){return t(function(e,t){return function(c){return fetch("http://localhost:3000/api/v1/stories/".concat(e,"/").concat(t),{method:"PUT",headers:{credentials:"include",Accept:"application/json","Content-Type":"text/html",Authorization:"Bearer ".concat(f)}}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){alert("Login Failed","Some error occured, please retry"),console.log(e)}))}}(e,c))},n=function(e,t){c(e,t),setTimeout((function(){return N.push("/userStories")}),1e3)};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("section",{children:[Object(C.jsxs)("header",{children:[Object(C.jsx)("div",{className:"col",children:Object(C.jsx)("strong",{children:"Summary"})}),Object(C.jsx)("div",{className:"col",children:Object(C.jsx)("strong",{children:"Description"})}),Object(C.jsx)("div",{className:"col",children:Object(C.jsx)("strong",{children:"Type"})}),Object(C.jsx)("div",{className:"col",children:Object(C.jsx)("strong",{children:"Complexity"})}),Object(C.jsx)("div",{className:"col",children:Object(C.jsx)("strong",{children:"Time"})}),Object(C.jsx)("div",{className:"col",children:Object(C.jsx)("strong",{children:"Cost"})}),Object(C.jsx)("div",{className:"col",children:Object(C.jsx)("strong",{children:"Status"})})]}),Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"col",children:e.summary}),Object(C.jsx)("div",{className:"col",children:e.description}),Object(C.jsx)("div",{className:"col",children:e.type}),Object(C.jsx)("div",{className:"col",children:e.complexity}),Object(C.jsx)("div",{className:"col",children:e.estimatedHrs}),Object(C.jsx)("div",{className:"col",children:e.cost}),Object(C.jsx)("div",{className:"col",children:e.status})]})]}),Object(C.jsxs)("div",{className:"btns",children:[Object(C.jsx)("button",{className:"btn btn-accept",onClick:function(){return n(e.id,"accepted")},children:"Accept"}),Object(C.jsx)("button",{className:"btn btn-reject",onClick:function(){return n(e.id,"rejected")},children:"Reject"})]})]})}));var G=function(){var e=Object(a.b)(),t=function(){return e({type:h})};return Object(C.jsx)("div",{className:"App",children:Object(C.jsxs)(T.c,{history:N,children:[Object(C.jsxs)(T.d,{children:[Object(C.jsx)(T.b,{exact:!0,path:"/",component:A}),Object(C.jsx)(k,{path:"/user",component:w}),Object(C.jsx)(k,{path:"/userStories",component:R}),Object(C.jsx)(k,{path:"/userStory",component:L})]}),Object(C.jsx)(I.a,{to:"/",onClick:function(){t(),sessionStorage.removeItem("token"),sessionStorage.removeItem("user")},children:"Logout"})]})})},B=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,48)).then((function(t){var c=t.getCLS,n=t.getFID,o=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),n(e),o(e),s(e),i(e)}))},D=c(11),F=c(28),P={isLoggedIn:!1,userId:"",isAdmin:!1,token:p(),data:"",stories:[{complexity:"",cost:0,description:"",summary:"",time:"",type:""}],story:{}},_=c(29),J=c.n(_),z=c(26),H=c(30),V=c.n(H),M=Object(D.c)({loginReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(j.a)(Object(j.a)({},e),{},{isAdmin:!0});case u:return Object(j.a)(Object(j.a)(Object(j.a)({},e),t.payload),{},{isLoggedIn:!0});case h:return{initialState:P};default:return e}},storyReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(j.a)(Object(j.a)({},e),{},{stories:[].concat(Object(l.a)(e.stories),[t.payload])});case O:return Object(j.a)(Object(j.a)({},e),{},{stories:t.payload});case m:return Object(j.a)(Object(j.a)({},e),{},{story:t.payload});case h:return{stories:[{complexity:"",cost:0,description:"",summary:"",time:"",type:""}]};default:return e}}}),U={key:"data",storage:V.a,whitelist:["loginReducer","storyReducer"]},Y=Object(z.a)(U,M),q=Object(D.d)(Y,Object(D.a)(F.a,J.a)),Q=Object(z.b)(q),K=c(31);i.a.render(Object(C.jsx)(a.a,{store:q,children:Object(C.jsx)(K.PersistGate,{loading:null,persistor:Q,children:Object(C.jsx)(o.a.StrictMode,{children:Object(C.jsx)(G,{})})})}),document.getElementById("root")),B()}},[[47,1,2]]]);
//# sourceMappingURL=main.81d370a3.chunk.js.map